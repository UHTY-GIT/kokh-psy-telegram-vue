"use strict";(self["webpackChunkkokh_assistant_vue_telegram"]=self["webpackChunkkokh_assistant_vue_telegram"]||[]).push([[843],{3923:function(e,a,s){s.r(a),s.d(a,{default:function(){return f}});var t=s(6768),l=s(4232);const n={class:"content-main"},i={class:"sv-materials"},o={key:0,class:"state state--loading"},r={class:"sv-materials__list"},c=["disabled","onClick"],u={class:"sv-materials__item-text"},d={class:"sv-materials__item-icon","aria-hidden":"true"},_={key:0,class:"item-spinner"},k=["src"],p={key:0,class:"sv-materials__hint"},v={key:0,class:"error-messages"};function y(e,a,s,y,m,g){return(0,t.uX)(),(0,t.CE)("div",null,[a[2]||(a[2]=(0,t.Lk)("div",{class:"container-tittle"},[(0,t.Lk)("p",null,"Мої матеріали"),(0,t.Lk)("hr",{class:"hr_title"})],-1)),(0,t.Lk)("div",n,[(0,t.Lk)("div",i,[a[1]||(a[1]=(0,t.Lk)("p",{class:"sv-materials__subtitle"}," Це архів вашої роботи. Тут ви можете згенерувати та завантажити PDF звіти по кейсу ",-1)),y.loading?((0,t.uX)(),(0,t.CE)("div",o,[...a[0]||(a[0]=[(0,t.Lk)("div",{class:"spinner","aria-label":"Loading"},null,-1),(0,t.Lk)("p",{class:"state__text"},"Завантажуємо матеріали...",-1)])])):((0,t.uX)(),(0,t.CE)(t.FK,{key:1},[(0,t.Lk)("div",r,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(y.items,e=>((0,t.uX)(),(0,t.CE)("button",{key:e.key,class:"sv-materials__item",type:"button",disabled:!e.available||y.downloadingItemKey===e.key,onClick:a=>y.onItemClick(e)},[(0,t.Lk)("span",u,(0,l.v_)(e.title),1),(0,t.Lk)("span",d,[y.downloadingItemKey===e.key?((0,t.uX)(),(0,t.CE)("div",_)):((0,t.uX)(),(0,t.CE)("img",{key:1,class:"sv-materials__icon",src:y.downloadIcon,alt:"Завантажити"},null,8,k))])],8,c))),128))]),y.hasLocked?((0,t.uX)(),(0,t.CE)("p",p," Деякі матеріали ще не доступні. Вони відкриються після того, як супервізор додасть/підтвердить дані. ")):(0,t.Q3)("",!0)],64))]),y.errors.length?((0,t.uX)(),(0,t.CE)("div",v,[(0,t.Lk)("ul",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(y.errors,e=>((0,t.uX)(),(0,t.CE)("li",{key:e},(0,l.v_)(e),1))),128))])])):(0,t.Q3)("",!0)])])}s(8111),s(3579);var m=s(144),g=s.p+"img/download-files-icon.d7b6d852.svg",b=s(133),w=s(5741),C=s.n(w),h={name:"SupervisorMaterialsPage",setup(){const e=(0,m.KR)(!0),a=(0,m.KR)([]),s=(0,m.KR)(null),l=(0,m.KR)([{key:"case_description",origin_type:"case_description_type",title:"Опис кейсу",available:!0},{key:"couple_cycle",origin_type:"couple_cycle_type",title:"Цикл пари",available:!0},{key:"bonus_cycle",origin_type:"couple_cycle_bonus_type",title:"Бонус для пари",available:!0}]),n=(0,t.EW)(()=>l.value.some(e=>!e.available)),i=async e=>{if(!s.value){s.value=e.key;try{const a={document_type:"pdf",origin_type:e.origin_type},s=await b.A.generateDocument(a),t=s.data.data;if(!t)throw new Error("File path not found in response");{const e=`${b.C}${t}`;window.Telegram?.WebApp?window.Telegram.WebApp.openLink(e,{try_instant_view:!1}):window.open(e,"_blank")}}catch(a){console.error("Error downloading document:",a),a.response&&429===a.response.status?C().toast({html:"Ліміт запитів перевищено. Будь ласка, спробуйте пізніше."}):C().toast({html:"Помилка завантаження файлу"})}finally{s.value=null}}};return(0,t.sV)(()=>{e.value=!1}),{loading:e,errors:a,items:l,hasLocked:n,onItemClick:i,downloadIcon:g,downloadingItemKey:s}}},L=s(1241);const E=(0,L.A)(h,[["render",y],["__scopeId","data-v-b880508c"]]);var f=E}}]);
//# sourceMappingURL=843.d6832468.js.map