"use strict";(self["webpackChunkkokh_assistant_vue_telegram"]=self["webpackChunkkokh_assistant_vue_telegram"]||[]).push([[404],{1132:function(e,a,t){t.r(a),t.d(a,{default:function(){return f}});var s=t(6768),l=t(4232);const n={class:"content-main"},i={class:"sv-materials"},o={key:0,class:"state state--loading"},r={class:"sv-materials__list"},c=["disabled","onClick"],u={class:"sv-materials__item-text"},d={class:"sv-materials__item-icon","aria-hidden":"true"},_={key:0,class:"item-spinner"},k=["src"],p={key:0,class:"sv-materials__hint"},v={key:0,class:"error-messages"};function m(e,a,t,m,y,g){return(0,s.uX)(),(0,s.CE)("div",null,[a[2]||(a[2]=(0,s.Lk)("div",{class:"container-tittle"},[(0,s.Lk)("p",null,"Мої матеріали"),(0,s.Lk)("hr",{class:"hr_title"})],-1)),(0,s.Lk)("div",n,[(0,s.Lk)("div",i,[a[1]||(a[1]=(0,s.Lk)("p",{class:"sv-materials__subtitle"}," Це архів вашої роботи. Тут ви можете згенерувати та завантажити PDF звіти по кейсу ",-1)),m.loading?((0,s.uX)(),(0,s.CE)("div",o,[...a[0]||(a[0]=[(0,s.Lk)("div",{class:"spinner","aria-label":"Loading"},null,-1),(0,s.Lk)("p",{class:"state__text"},"Завантажуємо матеріали...",-1)])])):((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[(0,s.Lk)("div",r,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(m.items,e=>((0,s.uX)(),(0,s.CE)("button",{key:e.key,class:"sv-materials__item",type:"button",disabled:!e.available||m.downloadingItemKey===e.key,onClick:a=>m.onItemClick(e)},[(0,s.Lk)("span",u,(0,l.v_)(e.title),1),(0,s.Lk)("span",d,[m.downloadingItemKey===e.key?((0,s.uX)(),(0,s.CE)("div",_)):((0,s.uX)(),(0,s.CE)("img",{key:1,class:"sv-materials__icon",src:m.downloadIcon,alt:"Завантажити"},null,8,k))])],8,c))),128))]),m.hasLocked?((0,s.uX)(),(0,s.CE)("p",p," Деякі матеріали ще не доступні. Вони відкриються після того, як супервізор додасть/підтвердить дані. ")):(0,s.Q3)("",!0)],64))]),m.errors.length?((0,s.uX)(),(0,s.CE)("div",v,[(0,s.Lk)("ul",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(m.errors,e=>((0,s.uX)(),(0,s.CE)("li",{key:e},(0,l.v_)(e),1))),128))])])):(0,s.Q3)("",!0)])])}t(8111),t(3579);var y=t(144),g=t.p+"img/download-files-icon.d7b6d852.svg",b=t(133),w=t(5741),C=t.n(w),h={name:"SupervisorMaterialsPage",setup(){const e=(0,y.KR)(!0),a=(0,y.KR)([]),t=(0,y.KR)(null),l=(0,y.KR)([{key:"case_description",origin_type:"case_description_type",title:"Опис кейсу",available:!0},{key:"couple_cycle",origin_type:"couple_cycle_type",title:"Цикл пари",available:!0},{key:"bonus_cycle",origin_type:"couple_cycle_bonus_type",title:"Бонус для пари",available:!0}]),n=(0,s.EW)(()=>l.value.some(e=>!e.available)),i=async e=>{if(t.value)return;t.value=e.key;const a=localStorage.getItem("telegram_user_id");try{const t={document_type:"pdf",origin_type:e.origin_type},s=await b.A.generateDocument(a,t),l=s.data.data;if(!l)throw new Error("File path not found in response");{const e=`${b.C}${l}`;window.Telegram?.WebApp?window.Telegram.WebApp.openLink(e,{try_instant_view:!1}):window.open(e,"_blank")}}catch(s){console.error("Error downloading document:",s),s.response&&429===s.response.status?C().toast({html:"Ліміт запитів перевищено. Будь ласка, спробуйте пізніше."}):C().toast({html:"Помилка завантаження файлу"})}finally{t.value=null}};return(0,s.sV)(()=>{e.value=!1}),{loading:e,errors:a,items:l,hasLocked:n,onItemClick:i,downloadIcon:g,downloadingItemKey:t}}},L=t(1241);const E=(0,L.A)(h,[["render",m],["__scopeId","data-v-02a634d6"]]);var f=E}}]);
//# sourceMappingURL=404.cde8703c.js.map