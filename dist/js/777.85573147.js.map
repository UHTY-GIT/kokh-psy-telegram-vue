{"version":3,"file":"js/777.85573147.js","mappings":"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","sources":["webpack://kokh-assistant-vue-telegram/./src/views/supervisor/SupervisorDashboardPage.vue","webpack://kokh-assistant-vue-telegram/./src/views/supervisor/SupervisorDashboardPage.vue?f2fc"],"sourcesContent":["<!-- src/views/supervisor/SupervisorDashboardPage.vue -->\n<template>\n  <div>\n    <div class=\"container-tittle\">\n      <p>\n        –ö–∞–±—ñ–Ω–µ—Ç —Å—É–ø–µ—Ä–≤—ñ–∑–∞–Ω—Ç–∞\n      </p>\n      <hr class=\"hr_title\">\n    </div>\n    <div class=\"content-main\">\n      <!-- LOADING -->\n      <div v-if=\"loading\" class=\"state state--loading\">\n        <div class=\"spinner\" aria-label=\"Loading\"></div>\n        <p class=\"state__text\">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</p>\n      </div>\n\n      <!-- CONTENT -->\n      <template v-else>\n        <section class=\"sv-dash\">\n          <h2 class=\"sv-dash__subtitle\">–í–∞—à –ø—Ä–æ—Å—Ç—ñ—Ä –ø—Ä–æ—Ñ–µ—Å—ñ–π–Ω–æ–≥–æ –∑—Ä–æ—Å—Ç–∞–Ω–Ω—è</h2>\n\n          <!-- Status card -->\n          <div class=\"sv-card sv-card--status\">\n            <h3 class=\"sv-card__title\">–ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞—Ç—É—Å</h3>\n            <div class=\"sv-card__text\">\n              <p>\n                <template v-if=\"lastConsultationDate\">\n                  –û—Å—Ç–∞–Ω–Ω—è —Å—É–ø–µ—Ä–≤—ñ–∑—ñ—è –≤—ñ–¥–±—É–ª–∞—Å—è:\n                  <span class=\"sv-card__value\">{{ formatDate(lastConsultationDate) }}</span>\n                </template>\n                <template v-else>\n                   –°—É–ø–µ—Ä–≤—ñ–∑—ñ–π–Ω–∞ —Å–µ—Å—ñ—è —â–µ –Ω–µ –ø—Ä–æ–≤–µ–¥–µ–Ω–∞\n                </template>\n              </p>\n            </div>\n          </div>\n\n          <!-- Primary action -->\n          <router-link\n            class=\"sv-cta\"\n            to=\"/supervisor/case-description\"\n            aria-label=\"–î–æ–¥–∞—Ç–∏ –º–∞—Ç–µ—Ä—ñ–∞–ª–∏ –¥–ª—è —Å—É–ø–µ—Ä–≤—ñ–∑—ñ—ó\"\n          >\n            <span class=\"sv-cta__text\">–î–æ–¥–∞—Ç–∏ –º–∞—Ç–µ—Ä—ñ–∞–ª–∏ –¥–ª—è —Å—É–ø–µ—Ä–≤—ñ–∑—ñ—ó</span>\n            <span class=\"sv-cta__arrow\" aria-hidden=\"true\">\n              <img class=\"sv-cta__arrow-icon\" :src=\"arrowButt\" alt=\"arrow right\" />\n            </span>\n          </router-link>\n\n          <!-- Progress card -->\n          <div class=\"sv-card sv-card--progress\">\n            <h3 class=\"sv-card__title\">EFCT Growth Index</h3>\n\n            <div class=\"sv-progress\" role=\"group\" aria-label=\"EFCT Growth Index\">\n              <div class=\"sv-progress__track\" aria-hidden=\"true\">\n                <div class=\"sv-progress__fill\" :style=\"{ width: animatedGrowthIndex + '%' }\"></div>\n              </div>\n              <div class=\"sv-progress__value\" aria-label=\"–ó–Ω–∞—á–µ–Ω–Ω—è\">{{ growthIndex }}%</div>\n            </div>\n            <div class=\"sv-card__text\" v-if=\"growthIndex > 0\">\n              <p>{{ efctText }}</p>\n            </div>\n          </div>\n        </section>\n\n\n\n        <!-- DEBUG INFO -->\n        <div v-if=\"isDebugMode\" class=\"debug-info\" style=\"margin-top: 20px; padding: 10px; background: #f0f0f0; border-radius: 8px;\">\n          <h3>Debug Init Data üêû</h3>\n          <p><strong>initData (Raw):</strong></p>\n          <pre style=\"white-space: pre-wrap; word-break: break-all;\">{{ telegramInitData }}</pre>\n\n          <p><strong>initDataUnsafe:</strong></p>\n          <pre style=\"white-space: pre-wrap; word-break: break-all;\">{{ telegramInitDataUnsafe }}</pre>\n        </div>\n\n        <section class=\"sv-card__footer\">\n          <p>\n            <b>¬© –ö–∞—Ç–µ—Ä–∏–Ω–∞ –ö–æ—Ö, 2026. –£—Å—ñ –ø—Ä–∞–≤–∞ –∑–∞—Ö–∏—â–µ–Ω–æ.</b> <br>\n            –ë—É–¥—å-—è–∫—ñ –º–∞—Ç–µ—Ä—ñ–∞–ª–∏ —Ü—å–æ–≥–æ —Å–µ—Ä–≤—ñ—Å—É, –≤–∫–ª—é—á–Ω–æ –∑ —Ç–µ–∫—Å—Ç–∞–º–∏, —Å—Ç—Ä—É–∫—Ç—É—Ä–æ—é, —Ñ–æ—Ä–º–æ—é –ø–æ–¥–∞—á—ñ, –º–µ—Ç–æ–¥–∏—á–Ω–æ—é –ª–æ–≥—ñ–∫–æ—é —Ç–∞ –¥–∏–∑–∞–π–Ω–æ–º, —î –æ–±‚Äô—î–∫—Ç–∞–º–∏ –∞–≤—Ç–æ—Ä—Å—å–∫–æ–≥–æ –ø—Ä–∞–≤–∞.\n          </p>\n        </section>\n      </template>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { onBeforeUnmount, onMounted, ref, computed } from 'vue';\nimport arrowButt from '@/assets/icons/arrow-rigth-butt.svg'\nimport apiService from '@/services/apiService';\nimport M from 'materialize-css';\nimport { useStore } from 'vuex';\n\nexport default {\n  name: 'SupervisorDashboardPage',\n  setup() {\n    const store = useStore();\n    const loading = ref(true);\n    const growthIndex = ref(0);\n    const animatedGrowthIndex = ref(0);\n    const efctText = ref('');\n    const lastConsultationDate = ref(null);\n    const telegramInitData = ref('');\n    const telegramInitDataUnsafe = ref('');\n    let animateTimer = null;\n\n    const isDebugMode = computed(() => store.getters.isDebugMode);\n\n    const runProgressAnimation = () => {\n      // reset to 0 so animation can replay\n      animatedGrowthIndex.value = 0;\n\n      // small delay so layout is painted before animating\n      animateTimer = window.setTimeout(() => {\n        animatedGrowthIndex.value = growthIndex.value;\n      }, 250);\n    };\n\n    const formatDate = (dateString) => {\n      const options = { year: 'numeric', month: '2-digit', day: '2-digit' };\n      const date = new Date(dateString);\n      return date.toLocaleDateString('uk-UA', options);\n    };\n\n    const fetchData = async () => {\n      loading.value = true;\n      try {\n        //const telegramID = 7155108378;\n        // Fetch EFCT Protocol\n        const [efctResponse, consultationsResponse] = await Promise.all([\n            apiService.getEfctProtocol().catch(err => {\n                console.error(\"Error fetching EFCT protocol:\", err);\n                return { data: { data: { efct_index: 0, efct_text: '–ù–µ–≤–∏–∑–Ω–∞—á–µ–Ω–æ' } } }; // Fallback\n            }),\n            apiService.getClientConsultations().catch(err => {\n                 console.error(\"Error fetching consultations:\", err);\n                 return { data: { data: [] } }; // Fallback\n            })\n        ]);\n\n        // Process EFCT Data\n        if (efctResponse && efctResponse.data) {\n             const rawData = efctResponse.data;\n             // Check if it's directly an array or inside .data\n             const dataList = Array.isArray(rawData) ? rawData : (Array.isArray(rawData.data) ? rawData.data : []);\n             \n             if (dataList.length > 0) {\n                 const item = dataList[0];\n                 growthIndex.value = item.efct_index || 0;\n                 efctText.value = item.efct_text || '';\n             }\n        }\n\n        // Process Consultations\n        if (consultationsResponse && consultationsResponse.data && consultationsResponse.data.data) {\n            const sessions = consultationsResponse.data.data;\n            if (sessions.length > 0) {\n                 sessions.sort((a, b) => new Date(b.consultation_date) - new Date(a.consultation_date));\n                 lastConsultationDate.value = sessions[0].consultation_date;\n            } else {\n                lastConsultationDate.value = null;\n            }\n        }\n\n      } catch (error) {\n        console.error('Error fetching dashboard data:', error);\n        M.toast({ html: '–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö' });\n      } finally {\n        loading.value = false;\n        if (growthIndex.value > 0) {\n            runProgressAnimation();\n        }\n      }\n    };\n\n    onMounted(() => {\n      const tg = window.Telegram?.WebApp;\n      if (tg) {\n        telegramInitData.value = tg.initData;\n        telegramInitDataUnsafe.value = JSON.stringify(tg.initDataUnsafe, null, 2);\n      }\n      fetchData();\n    });\n\n    onBeforeUnmount(() => {\n      if (animateTimer) window.clearTimeout(animateTimer);\n    });\n\n\n    return {\n      loading,\n      growthIndex,\n      animatedGrowthIndex,\n      efctText,\n      lastConsultationDate,\n      arrowButt,\n      formatDate,\n      telegramInitData,\n      telegramInitDataUnsafe,\n      isDebugMode\n    };\n  }\n}\n</script>\n","import { render } from \"./SupervisorDashboardPage.vue?vue&type=template&id=34b7f829\"\nimport script from \"./SupervisorDashboardPage.vue?vue&type=script&lang=js\"\nexport * from \"./SupervisorDashboardPage.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","role","style","_createElementBlock","_createElementVNode","_hoisted_1","$setup","loading","_hoisted_2","_cache","_Fragment","key","_hoisted_3","_hoisted_4","_hoisted_5","lastConsultationDate","_hoisted_6","_toDisplayString","formatDate","_createVNode","_component_router_link","to","_hoisted_7","src","arrowButt","alt","_hoisted_9","_hoisted_10","_hoisted_11","_normalizeStyle","width","animatedGrowthIndex","_hoisted_12","growthIndex","_hoisted_13","efctText","isDebugMode","_hoisted_14","_hoisted_15","telegramInitData","_hoisted_16","telegramInitDataUnsafe","name","setup","store","useStore","ref","animateTimer","computed","getters","runProgressAnimation","value","window","setTimeout","dateString","options","year","month","day","date","Date","toLocaleDateString","fetchData","async","efctResponse","consultationsResponse","Promise","all","apiService","getEfctProtocol","catch","err","console","error","data","efct_index","efct_text","getClientConsultations","rawData","dataList","Array","isArray","length","item","sessions","sort","a","b","consultation_date","M","html","onMounted","tg","Telegram","WebApp","initData","JSON","stringify","initDataUnsafe","onBeforeUnmount","clearTimeout","__exports__","render"],"ignoreList":[],"sourceRoot":""}