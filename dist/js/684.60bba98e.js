"use strict";(self["webpackChunkkokh_assistant_vue_telegram"]=self["webpackChunkkokh_assistant_vue_telegram"]||[]).push([[684],{7283:function(a,t,e){a.exports=e.p+"img/arrow-rigth-butt.e3e21117.svg"},7684:function(a,t,e){e.r(t),e.d(t,{default:function(){return A}});var s=e(6768),r=e(4232);const l={class:"content-main"},n={key:0,class:"state state--loading"},o={class:"sv-dash"},i={class:"sv-card sv-card--status"},c={class:"sv-card__text"},d={class:"sv-card__value"},u={class:"sv-cta__arrow","aria-hidden":"true"},v=["src"],k={class:"sv-card sv-card--progress"},_={class:"sv-progress",role:"group","aria-label":"EFCT Growth Index"},g={class:"sv-progress__track","aria-hidden":"true"},p={class:"sv-progress__value","aria-label":"Значення"},h={key:0,class:"sv-card__text"},L={class:"debug-info",style:{"margin-top":"20px",padding:"10px",background:"#f0f0f0","border-radius":"8px"}},f={style:{"white-space":"pre-wrap","word-break":"break-all"}},w={style:{"white-space":"pre-wrap","word-break":"break-all"}};function m(a,t,e,m,b,x){const D=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",null,[t[10]||(t[10]=(0,s.Lk)("div",{class:"container-tittle"},[(0,s.Lk)("p",null," Кабінет супервізанта "),(0,s.Lk)("hr",{class:"hr_title"})],-1)),(0,s.Lk)("div",l,[m.loading?((0,s.uX)(),(0,s.CE)("div",n,[...t[0]||(t[0]=[(0,s.Lk)("div",{class:"spinner","aria-label":"Loading"},null,-1),(0,s.Lk)("p",{class:"state__text"},"Завантаження...",-1)])])):((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[(0,s.Lk)("section",o,[t[5]||(t[5]=(0,s.Lk)("h2",{class:"sv-dash__subtitle"},"Ваш простір професійного зростання",-1)),(0,s.Lk)("div",i,[t[2]||(t[2]=(0,s.Lk)("h3",{class:"sv-card__title"},"Поточний статус",-1)),(0,s.Lk)("div",c,[(0,s.Lk)("p",null,[m.lastConsultationDate?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[t[1]||(t[1]=(0,s.eW)(" Остання супервізія відбулася: ",-1)),(0,s.Lk)("span",d,(0,r.v_)(m.formatDate(m.lastConsultationDate)),1)],64)):((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[(0,s.eW)(" Супервізійна сесія ще не проведена ")],64))])])]),(0,s.bF)(D,{class:"sv-cta",to:"/supervisor/case-description","aria-label":"Додати матеріали для супервізії"},{default:(0,s.k6)(()=>[t[3]||(t[3]=(0,s.Lk)("span",{class:"sv-cta__text"},"Додати матеріали для супервізії",-1)),(0,s.Lk)("span",u,[(0,s.Lk)("img",{class:"sv-cta__arrow-icon",src:m.arrowButt,alt:"arrow right"},null,8,v)])]),_:1}),(0,s.Lk)("div",k,[t[4]||(t[4]=(0,s.Lk)("h3",{class:"sv-card__title"},"EFCT Growth Index",-1)),(0,s.Lk)("div",_,[(0,s.Lk)("div",g,[(0,s.Lk)("div",{class:"sv-progress__fill",style:(0,r.Tr)({width:m.animatedGrowthIndex+"%"})},null,4)]),(0,s.Lk)("div",p,(0,r.v_)(m.growthIndex)+"%",1)]),m.growthIndex>0?((0,s.uX)(),(0,s.CE)("div",h,[(0,s.Lk)("p",null,(0,r.v_)(m.efctText),1)])):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",L,[t[6]||(t[6]=(0,s.Lk)("h3",null,"Debug Init Data",-1)),t[7]||(t[7]=(0,s.Lk)("p",null,[(0,s.Lk)("strong",null,"initData (Raw):")],-1)),(0,s.Lk)("pre",f,(0,r.v_)(m.telegramInitData),1),t[8]||(t[8]=(0,s.Lk)("p",null,[(0,s.Lk)("strong",null,"initDataUnsafe:")],-1)),(0,s.Lk)("pre",w,(0,r.v_)(m.telegramInitDataUnsafe),1)]),t[9]||(t[9]=(0,s.Lk)("section",{class:"sv-card__footer"},[(0,s.Lk)("p",null,[(0,s.Lk)("b",null,"© Катерина Кох, 2026. Усі права захищено."),(0,s.eW)(),(0,s.Lk)("br"),(0,s.eW)(" Будь-які матеріали цього сервісу, включно з текстами, структурою, формою подачі, методичною логікою та дизайном, є об’єктами авторського права. ")])],-1))],64))])])}e(3110);var b=e(144),x=e(7283),D=e(133),y=e(5741),C=e.n(y),E={name:"SupervisorDashboardPage",setup(){const a=(0,b.KR)(!0),t=(0,b.KR)(0),e=(0,b.KR)(0),r=(0,b.KR)(""),l=(0,b.KR)(null),n=(0,b.KR)(""),o=(0,b.KR)("");let i=null;const c=()=>{e.value=0,i=window.setTimeout(()=>{e.value=t.value},250)},d=a=>{const t={year:"numeric",month:"2-digit",day:"2-digit"},e=new Date(a);return e.toLocaleDateString("uk-UA",t)},u=async()=>{a.value=!0;try{const a=localStorage.getItem("telegram_user_id"),[e,s]=await Promise.all([D.A.getEfctProtocol(a).catch(a=>(console.error("Error fetching EFCT protocol:",a),{data:{data:{efct_index:0,efct_text:"Невизначено"}}})),D.A.getClientConsultations(a).catch(a=>(console.error("Error fetching consultations:",a),{data:{data:[]}}))]);if(e&&e.data){const a=e.data,s=Array.isArray(a)?a:Array.isArray(a.data)?a.data:[];if(s.length>0){const a=s[0];t.value=a.efct_index||0,r.value=a.efct_text||""}}if(s&&s.data&&s.data.data){const a=s.data.data;a.length>0?(a.sort((a,t)=>new Date(t.consultation_date)-new Date(a.consultation_date)),l.value=a[0].consultation_date):l.value=null}}catch(e){console.error("Error fetching dashboard data:",e),C().toast({html:"Помилка завантаження даних"})}finally{a.value=!1,t.value>0&&c()}};return(0,s.sV)(()=>{const a=window.Telegram?.WebApp;a&&(n.value=a.initData,o.value=JSON.stringify(a.initDataUnsafe,null,2)),u()}),(0,s.xo)(()=>{i&&window.clearTimeout(i)}),{loading:a,growthIndex:t,animatedGrowthIndex:e,efctText:r,lastConsultationDate:l,arrowButt:x,formatDate:d,telegramInitData:n,telegramInitDataUnsafe:o}}},I=e(1241);const K=(0,I.A)(E,[["render",m]]);var A=K}}]);
//# sourceMappingURL=684.60bba98e.js.map