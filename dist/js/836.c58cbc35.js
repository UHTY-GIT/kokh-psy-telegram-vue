"use strict";(self["webpackChunkkokh_assistant_vue_telegram"]=self["webpackChunkkokh_assistant_vue_telegram"]||[]).push([[836],{6836:function(a,t,e){e.r(t),e.d(t,{default:function(){return D}});var s=e(6768),r=e(4232);const l={class:"content-main"},n={key:0,class:"state state--loading"},o={key:1,class:"sv-dash"},c={class:"sv-card sv-card--status"},i={class:"sv-card__text"},d={class:"sv-card__value"},u={class:"sv-cta__arrow","aria-hidden":"true"},v=["src"],_={class:"sv-card sv-card--progress"},k={class:"sv-progress",role:"group","aria-label":"EFCT Growth Index"},h={class:"sv-progress__track","aria-hidden":"true"},g={class:"sv-progress__value","aria-label":"Значення"},f={key:0,class:"sv-card__text"};function p(a,t,e,p,w,L){const x=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",null,[t[6]||(t[6]=(0,s.Lk)("div",{class:"container-tittle"},[(0,s.Lk)("p",null," Кабінет супервізанта "),(0,s.Lk)("hr",{class:"hr_title"})],-1)),(0,s.Lk)("div",l,[p.loading?((0,s.uX)(),(0,s.CE)("div",n,[...t[0]||(t[0]=[(0,s.Lk)("div",{class:"spinner","aria-label":"Loading"},null,-1),(0,s.Lk)("p",{class:"state__text"},"Завантаження...",-1)])])):((0,s.uX)(),(0,s.CE)("section",o,[t[5]||(t[5]=(0,s.Lk)("h2",{class:"sv-dash__subtitle"},"Ваш простір професійного зростання",-1)),(0,s.Lk)("div",c,[t[2]||(t[2]=(0,s.Lk)("h3",{class:"sv-card__title"},"Поточний статус",-1)),(0,s.Lk)("p",i,[p.lastConsultationDate?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[t[1]||(t[1]=(0,s.eW)(" Остання супервізія відбулася: ",-1)),(0,s.Lk)("span",d,(0,r.v_)(p.formatDate(p.lastConsultationDate)),1)],64)):((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[(0,s.eW)(" Супервізійна сесія ще не проведена ")],64))])]),(0,s.bF)(x,{class:"sv-cta",to:"/supervisor/case-description","aria-label":"Додати матеріали для супервізії"},{default:(0,s.k6)(()=>[t[3]||(t[3]=(0,s.Lk)("span",{class:"sv-cta__text"},"Додати матеріали для супервізії",-1)),(0,s.Lk)("span",u,[(0,s.Lk)("img",{class:"sv-cta__arrow-icon",src:p.arrowButt,alt:"arrow right"},null,8,v)])]),_:1}),(0,s.Lk)("div",_,[t[4]||(t[4]=(0,s.Lk)("h3",{class:"sv-card__title"},"EFCT Growth Index",-1)),(0,s.Lk)("div",k,[(0,s.Lk)("div",h,[(0,s.Lk)("div",{class:"sv-progress__fill",style:(0,r.Tr)({width:p.animatedGrowthIndex+"%"})},null,4)]),(0,s.Lk)("div",g,(0,r.v_)(p.growthIndex)+"%",1)]),p.growthIndex>0?((0,s.uX)(),(0,s.CE)("div",f,[(0,s.Lk)("p",null,(0,r.v_)(p.efctText),1)])):(0,s.Q3)("",!0)])]))])])}var w=e(144),L=e(7283),x=e(133),m=e(5741),C=e.n(m),E={name:"SupervisorDashboardPage",setup(){const a=(0,w.KR)(!0),t=(0,w.KR)(0),e=(0,w.KR)(0),r=(0,w.KR)(""),l=(0,w.KR)(null);let n=null;const o=()=>{e.value=0,n=window.setTimeout(()=>{e.value=t.value},250)},c=a=>{const t={year:"numeric",month:"2-digit",day:"2-digit"},e=new Date(a);return e.toLocaleDateString("uk-UA",t)},i=async()=>{a.value=!0;try{const a=localStorage.getItem("telegram_user_id"),[e,s]=await Promise.all([x.A.getEfctProtocol(a).catch(a=>(console.error("Error fetching EFCT protocol:",a),{data:{data:{efct_index:0,efct_text:"Невизначено"}}})),x.A.getClientConsultations(a).catch(a=>(console.error("Error fetching consultations:",a),{data:{data:[]}}))]);if(e&&e.data&&e.data.data){const a=e.data.data;t.value=a.efct_index||0,r.value=a.efct_text||""}if(s&&s.data&&s.data.data){const a=s.data.data;a.length>0?(a.sort((a,t)=>new Date(t.consultation_date)-new Date(a.consultation_date)),l.value=a[0].consultation_date):l.value=null}}catch(e){console.error("Error fetching dashboard data:",e),C().toast({html:"Помилка завантаження даних"})}finally{a.value=!1,t.value>0&&o()}};return(0,s.sV)(()=>{i()}),(0,s.xo)(()=>{n&&window.clearTimeout(n)}),{loading:a,growthIndex:t,animatedGrowthIndex:e,efctText:r,lastConsultationDate:l,arrowButt:L,formatDate:c}}},b=e(1241);const y=(0,b.A)(E,[["render",p]]);var D=y},7283:function(a,t,e){a.exports=e.p+"img/arrow-rigth-butt.e3e21117.svg"}}]);
//# sourceMappingURL=836.c58cbc35.js.map