"use strict";(self["webpackChunkkokh_assistant_vue_telegram"]=self["webpackChunkkokh_assistant_vue_telegram"]||[]).push([[477],{1477:function(a,t,s){s.r(t),s.d(t,{default:function(){return D}});var e=s(6768),r=s(4232);const l={class:"content-main"},n={key:0,class:"state state--loading"},o={class:"sv-dash"},c={class:"sv-card sv-card--status"},i={class:"sv-card__text"},d={class:"sv-card__value"},u={class:"sv-cta__arrow","aria-hidden":"true"},v=["src"],_={class:"sv-card sv-card--progress"},k={class:"sv-progress",role:"group","aria-label":"EFCT Growth Index"},h={class:"sv-progress__track","aria-hidden":"true"},g={class:"sv-progress__value","aria-label":"Значення"},L={key:0,class:"sv-card__text"};function f(a,t,s,f,p,w){const x=(0,e.g2)("router-link");return(0,e.uX)(),(0,e.CE)("div",null,[t[7]||(t[7]=(0,e.Lk)("div",{class:"container-tittle"},[(0,e.Lk)("p",null," Кабінет супервізанта "),(0,e.Lk)("hr",{class:"hr_title"})],-1)),(0,e.Lk)("div",l,[f.loading?((0,e.uX)(),(0,e.CE)("div",n,[...t[0]||(t[0]=[(0,e.Lk)("div",{class:"spinner","aria-label":"Loading"},null,-1),(0,e.Lk)("p",{class:"state__text"},"Завантаження...",-1)])])):((0,e.uX)(),(0,e.CE)(e.FK,{key:1},[(0,e.Lk)("section",o,[t[5]||(t[5]=(0,e.Lk)("h2",{class:"sv-dash__subtitle"},"Ваш простір професійного зростання",-1)),(0,e.Lk)("div",c,[t[2]||(t[2]=(0,e.Lk)("h3",{class:"sv-card__title"},"Поточний статус",-1)),(0,e.Lk)("div",i,[(0,e.Lk)("p",null,[f.lastConsultationDate?((0,e.uX)(),(0,e.CE)(e.FK,{key:0},[t[1]||(t[1]=(0,e.eW)(" Остання супервізія відбулася: ",-1)),(0,e.Lk)("span",d,(0,r.v_)(f.formatDate(f.lastConsultationDate)),1)],64)):((0,e.uX)(),(0,e.CE)(e.FK,{key:1},[(0,e.eW)(" Супервізійна сесія ще не проведена ")],64))])])]),(0,e.bF)(x,{class:"sv-cta",to:"/supervisor/case-description","aria-label":"Додати матеріали для супервізії"},{default:(0,e.k6)(()=>[t[3]||(t[3]=(0,e.Lk)("span",{class:"sv-cta__text"},"Додати матеріали для супервізії",-1)),(0,e.Lk)("span",u,[(0,e.Lk)("img",{class:"sv-cta__arrow-icon",src:f.arrowButt,alt:"arrow right"},null,8,v)])]),_:1}),(0,e.Lk)("div",_,[t[4]||(t[4]=(0,e.Lk)("h3",{class:"sv-card__title"},"EFCT Growth Index",-1)),(0,e.Lk)("div",k,[(0,e.Lk)("div",h,[(0,e.Lk)("div",{class:"sv-progress__fill",style:(0,r.Tr)({width:f.animatedGrowthIndex+"%"})},null,4)]),(0,e.Lk)("div",g,(0,r.v_)(f.growthIndex)+"%",1)]),f.growthIndex>0?((0,e.uX)(),(0,e.CE)("div",L,[(0,e.Lk)("p",null,(0,r.v_)(f.efctText),1)])):(0,e.Q3)("",!0)])]),t[6]||(t[6]=(0,e.Lk)("section",{class:"sv-card__footer"},[(0,e.Lk)("p",null,[(0,e.Lk)("b",null,"© Катерина Кох, 2026. Усі права захищено."),(0,e.eW)(),(0,e.Lk)("br"),(0,e.eW)(" Будь-які матеріали цього сервісу, включно з текстами, структурою, формою подачі, методичною логікою та дизайном, є об’єктами авторського права. ")])],-1))],64))])])}var p=s(144),w=s(7283),x=s(133),m=s(5741),C=s.n(m),y={name:"SupervisorDashboardPage",setup(){const a=(0,p.KR)(!0),t=(0,p.KR)(0),s=(0,p.KR)(0),r=(0,p.KR)(""),l=(0,p.KR)(null);let n=null;const o=()=>{s.value=0,n=window.setTimeout(()=>{s.value=t.value},250)},c=a=>{const t={year:"numeric",month:"2-digit",day:"2-digit"},s=new Date(a);return s.toLocaleDateString("uk-UA",t)},i=async()=>{a.value=!0;try{const a=localStorage.getItem("telegram_user_id"),[s,e]=await Promise.all([x.A.getEfctProtocol(a).catch(a=>(console.error("Error fetching EFCT protocol:",a),{data:{data:{efct_index:0,efct_text:"Невизначено"}}})),x.A.getClientConsultations(a).catch(a=>(console.error("Error fetching consultations:",a),{data:{data:[]}}))]);if(s&&s.data){const a=s.data,e=Array.isArray(a)?a:Array.isArray(a.data)?a.data:[];if(e.length>0){const a=e[0];t.value=a.efct_index||0,r.value=a.efct_text||""}}if(e&&e.data&&e.data.data){const a=e.data.data;a.length>0?(a.sort((a,t)=>new Date(t.consultation_date)-new Date(a.consultation_date)),l.value=a[0].consultation_date):l.value=null}}catch(s){console.error("Error fetching dashboard data:",s),C().toast({html:"Помилка завантаження даних"})}finally{a.value=!1,t.value>0&&o()}};return(0,e.sV)(()=>{i()}),(0,e.xo)(()=>{n&&window.clearTimeout(n)}),{loading:a,growthIndex:t,animatedGrowthIndex:s,efctText:r,lastConsultationDate:l,arrowButt:w,formatDate:c}}},b=s(1241);const E=(0,b.A)(y,[["render",f]]);var D=E},7283:function(a,t,s){a.exports=s.p+"img/arrow-rigth-butt.e3e21117.svg"}}]);
//# sourceMappingURL=477.7cf42c33.js.map