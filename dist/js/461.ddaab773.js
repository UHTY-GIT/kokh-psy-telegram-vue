"use strict";(self["webpackChunkkokh_assistant_vue_telegram"]=self["webpackChunkkokh_assistant_vue_telegram"]||[]).push([[461],{1946:function(e,a,t){t.r(a),t.d(a,{default:function(){return f}});var l=t(6768),s=t(4232);const n={class:"content-main"},i={class:"sv-materials"},o={key:0,class:"state state--loading"},r={class:"sv-materials__list"},c=["disabled","onClick"],u={class:"sv-materials__item-text"},d={class:"sv-materials__item-icon","aria-hidden":"true"},_={key:0,class:"item-spinner"},k=["src"],p={key:0,class:"sv-materials__hint"},v={key:0,class:"error-messages"};function y(e,a,t,y,m,g){return(0,l.uX)(),(0,l.CE)("div",null,[a[2]||(a[2]=(0,l.Lk)("div",{class:"container-tittle"},[(0,l.Lk)("p",null,"Мої матеріали"),(0,l.Lk)("hr",{class:"hr_title"})],-1)),(0,l.Lk)("div",n,[(0,l.Lk)("div",i,[a[1]||(a[1]=(0,l.Lk)("p",{class:"sv-materials__subtitle"}," Це архів вашої роботи. Тут ви можете згенерувати та завантажити PDF звіти по кейсу ",-1)),y.loading?((0,l.uX)(),(0,l.CE)("div",o,[...a[0]||(a[0]=[(0,l.Lk)("div",{class:"spinner","aria-label":"Loading"},null,-1),(0,l.Lk)("p",{class:"state__text"},"Завантажуємо матеріали...",-1)])])):((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[(0,l.Lk)("div",r,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(y.items,e=>((0,l.uX)(),(0,l.CE)("button",{key:e.key,class:"sv-materials__item",type:"button",disabled:!e.available||y.downloadingItemKey===e.key,onClick:a=>y.onItemClick(e)},[(0,l.Lk)("span",u,(0,s.v_)(e.title),1),(0,l.Lk)("span",d,[y.downloadingItemKey===e.key?((0,l.uX)(),(0,l.CE)("div",_)):((0,l.uX)(),(0,l.CE)("img",{key:1,class:"sv-materials__icon",src:y.downloadIcon,alt:"Завантажити"},null,8,k))])],8,c))),128))]),y.hasLocked?((0,l.uX)(),(0,l.CE)("p",p," Деякі матеріали ще не доступні. Вони відкриються після того, як супервізор додасть/підтвердить дані. ")):(0,l.Q3)("",!0)],64))]),y.errors.length?((0,l.uX)(),(0,l.CE)("div",v,[(0,l.Lk)("ul",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(y.errors,e=>((0,l.uX)(),(0,l.CE)("li",{key:e},(0,s.v_)(e),1))),128))])])):(0,l.Q3)("",!0)])])}t(8111),t(3579);var m=t(144),g=t.p+"img/download-files-icon.d7b6d852.svg",b=t(133),w=t(5741),C=t.n(w),h={name:"SupervisorMaterialsPage",setup(){const e=(0,m.KR)(!0),a=(0,m.KR)([]),t=(0,m.KR)(null),s=(0,m.KR)([{key:"case_description",origin_type:"case_description_type",title:"Опис кейсу",available:!0},{key:"couple_cycle",origin_type:"couple_cycle_type",title:"Цикл пари",available:!0},{key:"bonus_cycle",origin_type:"couple_cycle_bonus_type",title:"Бонус для пари",available:!0}]),n=(0,l.EW)(()=>s.value.some(e=>!e.available)),i=async e=>{if(t.value)return;t.value=e.key;const a=localStorage.getItem("telegram_user_id");try{const t={document_type:"pdf",origin_type:e.origin_type},l=await b.A.generateDocument(a,t),s=l.data.data;if(!s)throw new Error("File path not found in response");{const e=`${b.C}${s}`;window.Telegram?.WebApp?window.Telegram.WebApp.openLink(e,{try_instant_view:!1}):window.open(e,"_blank")}}catch(l){console.error("Error downloading document:",l),C().toast({html:"Помилка завантаження файлу"})}finally{t.value=null}};return(0,l.sV)(()=>{e.value=!1}),{loading:e,errors:a,items:s,hasLocked:n,onItemClick:i,downloadIcon:g,downloadingItemKey:t}}},L=t(1241);const E=(0,L.A)(h,[["render",y],["__scopeId","data-v-b374065e"]]);var f=E}}]);
//# sourceMappingURL=461.ddaab773.js.map