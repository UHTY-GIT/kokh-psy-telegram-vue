"use strict";(self["webpackChunkkokh_assistant_vue_telegram"]=self["webpackChunkkokh_assistant_vue_telegram"]||[]).push([[892],{4548:function(e,a,t){t.r(a),t.d(a,{default:function(){return w}});var l=t(6768),s=t(4232);const n={class:"content-main"},i={class:"sv-materials"},o={key:0,class:"state state--loading"},r={class:"sv-materials__list"},c=["disabled","onClick"],d={class:"sv-materials__item-text"},u={class:"sv-materials__item-icon","aria-hidden":"true"},_={key:0,class:"item-spinner"},k=["src"],m={key:0,class:"sv-materials__hint"},p={key:0,class:"error-messages"};function v(e,a,t,v,y,g){return(0,l.uX)(),(0,l.CE)("div",null,[a[2]||(a[2]=(0,l.Lk)("div",{class:"container-tittle"},[(0,l.Lk)("p",null,"Мої матеріали"),(0,l.Lk)("hr",{class:"hr_title"})],-1)),(0,l.Lk)("div",n,[(0,l.Lk)("div",i,[a[1]||(a[1]=(0,l.Lk)("p",{class:"sv-materials__subtitle"}," Це архів вашої роботи. Тут ви можете згенерувати та завантажити PDF звіти по кейсу ",-1)),v.loading?((0,l.uX)(),(0,l.CE)("div",o,[...a[0]||(a[0]=[(0,l.Lk)("div",{class:"spinner","aria-label":"Loading"},null,-1),(0,l.Lk)("p",{class:"state__text"},"Завантажуємо матеріали...",-1)])])):((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[(0,l.Lk)("div",r,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(v.items,e=>((0,l.uX)(),(0,l.CE)("button",{key:e.key,class:"sv-materials__item",type:"button",disabled:!e.available||v.downloadingItemKey===e.key,onClick:a=>v.onItemClick(e)},[(0,l.Lk)("span",d,(0,s.v_)(e.title),1),(0,l.Lk)("span",u,[v.downloadingItemKey===e.key?((0,l.uX)(),(0,l.CE)("div",_)):((0,l.uX)(),(0,l.CE)("img",{key:1,class:"sv-materials__icon",src:v.downloadIcon,alt:"Завантажити"},null,8,k))])],8,c))),128))]),v.hasLocked?((0,l.uX)(),(0,l.CE)("p",m," Деякі матеріали ще не доступні. Вони відкриються після того, як супервізор додасть/підтвердить дані. ")):(0,l.Q3)("",!0)],64))]),v.errors.length?((0,l.uX)(),(0,l.CE)("div",p,[(0,l.Lk)("ul",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(v.errors,e=>((0,l.uX)(),(0,l.CE)("li",{key:e},(0,s.v_)(e),1))),128))])])):(0,l.Q3)("",!0)])])}t(8111),t(3579);var y=t(144),g=t.p+"img/download-files-icon.d7b6d852.svg",C=t(133),b=t(5741),h=t.n(b),E={name:"SupervisorMaterialsPage",setup(){const e=(0,y.KR)(!0),a=(0,y.KR)([]),t=(0,y.KR)(null),s=(0,y.KR)([{key:"case_description",origin_type:"case_description_type",title:"Опис кейсу",available:!0},{key:"couple_cycle",origin_type:"couple_cycle_type",title:"Цикл пари",available:!0},{key:"bonus_cycle",origin_type:"couple_cycle_bonus_type",title:"Бонус для пари",available:!0}]),n=(0,l.EW)(()=>s.value.some(e=>!e.available)),i=async e=>{if(t.value)return;t.value=e.key;const a=localStorage.getItem("telegram_user_id");try{const t={document_type:"pdf",origin_type:e.origin_type},l=await C.A.generateDocument(a,t),s=l.data.data;if(!s)throw new Error("File path not found in response");{const a=`${C.C}${s}`,t=document.createElement("a");t.href=a,t.target="_blank",t.download=`document_${e.key}.pdf`,document.body.appendChild(t),t.click(),document.body.removeChild(t)}}catch(l){console.error("Error downloading document:",l),h().toast({html:"Помилка завантаження файлу"})}finally{t.value=null}};return(0,l.sV)(()=>{e.value=!1}),{loading:e,errors:a,items:s,hasLocked:n,onItemClick:i,downloadIcon:g,downloadingItemKey:t}}},L=t(1241);const f=(0,L.A)(E,[["render",v],["__scopeId","data-v-3a385a85"]]);var w=f}}]);
//# sourceMappingURL=892.f6fe99e8.js.map