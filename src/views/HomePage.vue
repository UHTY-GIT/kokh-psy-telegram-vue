<!-- src/views/HomePage.vue -->
<template>
  <div>
    <div class="container-tittle">
      <p>
        –ì–æ–ª–æ–≤–Ω–∞
      </p>
      <hr class="hr_title">
    </div>
    <div class="content-main">
      <!-- LOADING -->
      <div v-if="loading" class="state state--loading">
        <div class="spinner" aria-label="Loading"></div>
        <p class="state__text">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</p>
      </div>

      <!-- DEBUG INFO -->
      <div v-if="isDebugMode" class="debug-info-box">
        <h3>Debug Init Data üêû</h3>
        <p><strong>initData (Raw):</strong></p>
        <pre style="white-space: pre-wrap; word-break: break-all;">{{ telegramInitData }}</pre>

        <p><strong>initDataUnsafe:</strong></p>
        <pre style="white-space: pre-wrap; word-break: break-all;">{{ telegramInitDataUnsafe }}</pre>
      </div>

      <!-- CONTENT -->
      <template v-else>
        <div v-if="typeClient === 'individual'" class="single-text">
          <p>
            –ü—Ä–∏–≤—ñ—Ç! ü§ó
          </p>
          <p>
            –í—ñ—Ç–∞—î–º–æ —É –æ–Ω–æ–≤–ª–µ–Ω–æ–º—É —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ñ <b>psychological digital workbook.</b>
          </p>
          <p>
            –¢—É—Ç —Ç–∏  –º–∞—î—à –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –ø–µ—Ä–µ–≥–ª—è–¥–∞—Ç–∏ —ñ—Å—Ç–æ—Ä—ñ—é —Å–≤–æ—ó—Ö —Å–µ—Å—ñ–π, –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏—Å—è –¥–æ –≤–∞–∂–ª–∏–≤–∏—Ö –ø–∏—Ç–∞–Ω—å —Å–∞–º–æ—Ä–µ—Ñ–ª–µ–∫—Å—ñ—ó, —Ç—Ä–∏–º–∞—Ç–∏ —É —Ñ–æ–∫—É—Å—ñ —Å–≤—ñ–π –∑–∞–ø–∏—Ç —Ç–∞ –æ–∑–Ω–∞–π–æ–º–∏—Ç–∏—Å—è –∑—ñ —Å–≤–æ—î—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ—é —Å–µ—Å—ñ–π —É –≤–∏–≥–ª—è–¥—ñ –≥—Ä–∞—Ñ—ñ–∫—É.
          </p>
          <p>
            –ö—Ä—ñ–º —Ü—å–æ–≥–æ —Ç—É—Ç —Ç–∏ –∑–º–æ–∂–µ—à –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏ —Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–Ω–∏–π –≤—ñ–¥–≥—É–∫ –≤—ñ–¥ –ø—Å–∏—Ö–æ–ª–æ–≥–∞ –ø–æ —Ä—É—Ö—É —Ç–µ—Ä–∞–ø—ñ—ó —Ç–∞ —Å–≤–æ—î–º—É –∑–∞–ø–∏—Ç—É ü§ç
          </p>
          <p>
            –•–∞–π —Ü–µ–π –ø—Å–∏—Ö–æ–ª–æ–≥—ñ—á–Ω–∏–π –∫—É—Ä—Å –±—É–¥–µ –ø—Ä–æ—Å—Ç–æ—Ä–æ–º –¥–ª—è —Ç–≤–æ—ó—Ö  –¥—É–º–æ–∫, –≤–∞–∂–ª–∏–≤–∏—Ö —Å–µ–Ω—Å—ñ–≤ —Ç–∞ —Ü—ñ–Ω–Ω–æ—Å—Ç–µ–π.
          </p>
        </div>
        <div v-else-if="typeClient === 'couple_classic'" class="couple-text">
          <p>
            –ü—Ä–∏–≤—ñ—Ç! ü§ó
          </p>
          <p>
            –í—ñ—Ç–∞—î–º–æ –≤–∞—Å —É –æ–Ω–æ–≤–ª–µ–Ω–æ–º—É —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ñ <b>psychological digital workbook –¥–ª—è –ø–∞—Ä.</b>
          </p>
          <p>
            –¢—É—Ç –≤–∏  –º–∞—î—Ç–µ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –ø–µ—Ä–µ–≥–ª—è–¥–∞—Ç–∏ —ñ—Å—Ç–æ—Ä—ñ—é —Å–≤–æ—ó—Ö —Å–µ—Å—ñ–π, –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏—Å—è –¥–æ –≤–∞–∂–ª–∏–≤–∏—Ö –ø–∏—Ç–∞–Ω—å —Å–∞–º–æ—Ä–µ—Ñ–ª–µ–∫—Å—ñ—ó, —Ç—Ä–∏–º–∞—Ç–∏ —É —Ñ–æ–∫—É—Å—ñ —Å–≤—ñ–π –∑–∞–ø–∏—Ç  —Ç–∞ —Ü–∏–∫–ª. –û–∑–Ω–∞–π–æ–º–∏—Ç–∏—Å—è  –∑—ñ —Å–≤–æ—î—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ—é —Å–µ—Å—ñ–π —É –≤–∏–≥–ª—è–¥—ñ –≥—Ä–∞—Ñ—ñ–∫—É.
          </p>
          <p>
            –ö—Ä—ñ–º —Ü—å–æ–≥–æ —Ç—É—Ç –≤–∏ –∑–º–æ–∂–µ—à –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏ —Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–Ω–∏–π –≤—ñ–¥–≥—É–∫ –≤—ñ–¥ –ø–∞—Ä–Ω–æ–≥–æ –ø—Å–∏—Ö–æ–ª–æ–≥–∞ –ø–æ —Ä—É—Ö—É —Ç–µ—Ä–∞–ø—ñ—ó —Ç–∞ —Å–≤–æ—î–º—É –∑–∞–ø–∏—Ç—É ü§ç
          </p>
          <p>
            –•–∞–π —Ü–µ–π –ø—Å–∏—Ö–æ–ª–æ–≥—ñ—á–Ω–∏–π –∫—É—Ä—Å –±—É–¥–µ –ø—Ä–æ—Å—Ç–æ—Ä–æ–º –¥–ª—è –≤–∞—à–∏—Ö –¥—É–º–æ–∫, –≤–∞–∂–ª–∏–≤–∏—Ö —Å–µ–Ω—Å—ñ–≤ —Ç–∞ –±–ª–∏–∑—å–∫–æ—Å—Ç—ñ.
          </p>
        </div>
        <div v-else>
        <p>
          –ü—Ä–∏–≤—ñ—Ç! ü§ó
        </p>
        <p>
          –ë—É–¥—å –ª–∞—Å–∫–∞, –∑–∞–ø–∏—à—ñ—Ç—å—Å—è –Ω–∞ —Å–≤–æ—é –ø–µ—Ä—à—É –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—é.
        </p>
      </div>
      </template>
    </div>
  </div>
</template>

<script>
import { onMounted, ref, computed } from 'vue';
import { useStore } from 'vuex';

export default {
  name: "HomePage",
  setup() {
    const store = useStore();
    const loading = ref(true);
    const typeClient = ref('');
    const userId = ref('');
    const telegramInitData = ref('');
    const telegramInitDataUnsafe = ref('');

    const isDebugMode = computed(() => store.getters.isDebugMode);

    onMounted(() => {
      const tg = window.Telegram?.WebApp;
      if (tg) {
        telegramInitData.value = tg.initData;
        telegramInitDataUnsafe.value = JSON.stringify(tg.initDataUnsafe, null, 2);
      }

      const originType = localStorage.getItem('origin_type');
      if (originType) {
        typeClient.value = originType;
      }
      userId.value = localStorage.getItem('telegram_user_id') || 'N/A';
      loading.value = false;
    });

    return {
      loading,
      typeClient,
      isDebugMode,
      userId,
      telegramInitData,
      telegramInitDataUnsafe
    };
  }
}
</script>

<style scoped lang="scss">
.debug-info-box {
  margin-top: 20px;
  padding: 10px;
  background: #f0f0f0;
  border-radius: 8px;
  color: #333;
  margin-bottom: 20px;

  h3 {
    margin: 0 0 10px;
  }
}
</style>
